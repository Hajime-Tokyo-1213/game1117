# 改修仕様書 23

## フェーズ1.23 - AccountSettingsバリデーション統合

### 改修の目的
アカウント設定ページで共通バリデーションライブラリを統合

### 改修内容

#### 1. AccountSettings.jsxの更新
```javascript
// src/pages/AccountSettings.jsx
import { validateAndSanitize } from '../utils/validation';

const AccountSettings = () => {
  const validateProfile = (profileData) => {
    const validations = {
      email: validateAndSanitize(profileData.email, 'email'),
      phone: validateAndSanitize(profileData.phone, 'phone'),
      name: validateAndSanitize(profileData.name, 'required')
    };
    
    return validations;
  };
  
  const handleProfileUpdate = async (e) => {
    e.preventDefault();
    
    const validations = validateProfile(profileData);
    const hasErrors = Object.values(validations).some(v => !v.isValid);
    
    if (hasErrors) {
      setErrors(Object.fromEntries(
        Object.entries(validations)
          .filter(([_, v]) => v.error)
          .map(([k, v]) => [k, v.error])
      ));
      return;
    }
    
    // 更新処理
  };
};
```

#### 2. フィールド別バリデーション強化
- 住所のバリデーション
- 郵便番号の正確な検証
- 名前フィールドの検証

#### 3. 設定保存の安全性向上
- 保存前の必須検証
- データ整合性チェック

### 影響範囲
- `src/pages/AccountSettings.jsx`

### 所要時間
2-3時間

### 検証項目
- 全フィールドのバリデーションが動作すること
- 不正入力が適切に弾かれること
- ユーザー体験が向上していること

### 次のステップ
改修仕様書_24: StaffManagementバリデーション統合